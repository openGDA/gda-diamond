# Beamline-specific properties, overriding the values set in dls-config

gda.beamline.name = i14
gda.instrument = ${gda.beamline.name}

gda.scan.concurrentScan.readoutConcurrently = true

gda.beamline.scripts.dir = /dls_sw/${gda.beamline.name}/scripts

gda.data.numtracker = ${gda.var}

gda.default.detector.snapshot = ${gda.var}/xsp3_addetector-acquire.nxs

gda.factory.allowExceptionInConfigure = True

gda.livestream.snapshots.datadir = /microscope_snapshots
gda.observable.notificationWarningTime=105

gda.data.scan.datawriter.dataFormat = NexusDataWriter
gda.data.scan.datawriter.datadir = ${gda.paths.visitdirectory}/scan/$subdirectory$
gda.data.filePrefix = ${gda.beamline.name}-
gda.nexus.beamlinePrefix = true
gda.nexus.createSRS = false
gda.nexus.instrumentApi = true

gda.gui.window.start.width = 1920
gda.gui.window.start.height = 1200

gda.epics.request.timeout = 5.0

gda.accesscontrol.useAccessControl = false
gda.accesscontrol.useBatonControl = false

gda.scan.sets.scannumber = true

# Show new (GDA 9) queue in the command queue view
gda.client.useStatusQueueView = true
# Display 4 decimal places in the mapping GUI controls
gda.client.decimalFormat = 0.####

# Allow configuration of Excalibur detector
org.eclipse.scanning.malcolm.supports.acquire = BL14I-ML-EXCBR-01

# Tomography calibration
gda.tomography.config.directory = ${gda.var}/tomoConfig
gda.tomography.calibration.file = calibration.json

gda.autoprocessing.server.host = http://i14-control
gda.autoprocessing.server.port = 8695

experiment.structure.job.request.topic = uk.ac.diamond.daq.experiment.structure.job.request.topic
experiment.structure.job.response.topic = uk.ac.diamond.daq.experiment.structure.job.response.topic

#Add all beamline specific keys before this line
include=${sys:gda.facility.dir}/properties/${sys:gda.mode}/${sys:gda.mode}_facility_java.properties
#Do not set any keys after this line as the value may not get set as expected.


# Live stream views with detector controls

# Merlin
client.cameras[0].id = merlin_detector
client.cameras[0].name = Merlin Detector
client.cameras[0].configuration = merlin_cam
client.cameras[0].cameraControl = merlin_camera_control
client.cameras[0].streamingConfiguration.imageMode = CONTINUOUS
client.cameras[0].streamingConfiguration.triggerMode = 0

# Excalibur 
client.cameras[1].id = excalibur_detector
client.cameras[1].name = Excalibur Detector
client.cameras[1].configuration = excalibur_stream
client.cameras[1].cameraControl = excalibur_camera_control
client.cameras[1].streamingConfiguration.imageMode = CONTINUOUS
client.cameras[1].streamingConfiguration.triggerMode = 0


# Eiger
client.cameras[2].id = eiger_detector
client.cameras[2].name = Eiger Detector
client.cameras[2].configuration = eiger_stream
client.cameras[2].cameraControl = eiger_camera_control
