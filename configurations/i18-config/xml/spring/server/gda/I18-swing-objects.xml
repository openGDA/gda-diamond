<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">    
           
           
     <!-- XSPRESS2 System -->
	<!-- Startup script which does the setup command is no longer needed for the 
		new version of the xspress as it is done in the config script using the follwoing
		commands, set-input and set-glitch. However a new command called format-run for setting the output format 
		 has to be sent before opening the mca and scaler paths. So in this version of gda the startupScript element 
		 is used to send this format command. In later versions of GDA this will be replaced by a formatCommand element-->
	<bean id="sw_xspress2system" class="gda.device.xspress.Xspress2System">
	<property name="daServerName" value="daserver"></property>
	<property name="tfgName" value="tfg"></property>
	<property name="mcaOpenCommand" value="xspress2 open-mca 'xsp1'"></property>
	<property name="scalerOpenCommand" value="xspress2 open-scalers 'xsp1'"></property>
	<property name="startupScript" value="xspress2 format-run 'xsp1' res-none"></property>
	<property name="numberOfDetectors" value="9"></property>
	<property name="dummy" value="false"></property>
	</bean>
 
		<bean id="idgap_positioner" class="gda.oe.positioners.LinearPositioner">
		<property name="name" value="idgap_positioner"></property>
		<property name="motorName" value="idgap_motor"></property>
		<property name="stepsPerUnit" value="1"></property>
		<property name="softLimitLow" value="-100"></property>
		<property name="softLimitHigh" value="100"></property>
		<property name="poll" value="false"></property>
	</bean>
	<bean id="idgap" class="gda.oe.dofs.EpicsAxisLinearDOF">
		<property name="name" value="idgap"></property>
		<property name="protectionLevel" value="0"></property>		
		<property name="moveables">
			<list>
				<ref bean="idgap_positioner" />
			</list>
		</property>
		<property name="acceptableUnitNames">
			<list>
				<value>mm</value>
			</list>
		</property>
	</bean>
	<bean id="ID" class="gda.oe.GenericOE">
	<property name="moveables">
		<list>
			<ref bean="idgap"/>
		</list>
	</property>
	</bean>
	
	
	<!-- Camera zoom and focus motors -->
	<bean id="vma_zoom_positioner" class="gda.oe.positioners.LinearPositioner">
		<property name="name" value="vma_zoom_positioner"></property>
		<property name="motorName" value="vma_zoom_motor"></property>
		<property name="stepsPerUnit" value="1"></property>
		<property name="softLimitLow" value="-10"></property>
		<property name="softLimitHigh" value="33970"></property>
		<property name="poll" value="false"></property>
	</bean>
	<bean id="vma_zoom" class="gda.oe.dofs.EpicsAxisLinearDOF">
		<property name="name" value="vma_zoom"></property>
		<property name="protectionLevel" value="0"></property>
		<property name="moveables">
			<list>
				<ref bean="vma_zoom_positioner" />
			</list>
		</property>		
	</bean>
	<bean id="vma_focus_positioner" class="gda.oe.positioners.LinearPositioner">
		<property name="name" value="vma_focus_positioner"></property>
		<property name="motorName" value="vma_focus_motor"></property>
		<property name="stepsPerUnit" value="1"></property>
		<property name="softLimitLow" value="-10"></property>
		<property name="softLimitHigh" value="11860"></property>
		<property name="poll" value="false"></property>
	</bean>
	<bean id="vma_focus" class="gda.oe.dofs.EpicsAxisLinearDOF">
		<property name="name" value="vma_focus"></property>
		<property name="protectionLevel" value="0"></property>
		<property name="moveables">
			<list>
				<ref bean="vma_focus_positioner" />
			</list>
		</property>		
	</bean>
	<bean id="VMA" class="gda.oe.GenericOE">
	<property name="moveables">
		<list>
			<ref bean="vma_zoom"/>
			<ref bean="vma_focus"/>
		</list>
	</property>
	</bean>
	
	<!-- DCM Optical Element -->
	<bean id="dcm_bragg_positioner" class="gda.oe.positioners.AngularPositioner">
		<property name="name" value="dcm_bragg_positioner"></property>
		<property name="motorName" value="dcm_bragg_motor"></property>
		<property name="stepsPerUnit" value="-1"></property>
		<property name="softLimitLow" value="-6000"></property>
		<property name="softLimitHigh" value="80000"></property>
		<property name="poll" value="false"></property>
	</bean>
	<bean id="dcm_crystal1_roll_positioner" class="gda.oe.positioners.AngularPositioner">
		<property name="name" value="dcm_crystal1_roll_positioner"></property>
		<property name="motorName" value="dcm_crystal1_roll_motor"></property>
		<property name="stepsPerUnit" value="1"></property>
		<property name="softLimitLow" value="-17.453"></property>
		<property name="softLimitHigh" value="17.453"></property>
		<property name="poll" value="false"></property>
	</bean>
	<bean id="dcm_crystal2_roll_positioner" class="gda.oe.positioners.AngularPositioner">
		<property name="name" value="dcm_crystal2_roll_positioner"></property>
		<property name="motorName" value="dcm_crystal2_roll_motor"></property>
		<property name="stepsPerUnit" value="1"></property>
		<property name="softLimitLow" value="-1.9"></property>
		<property name="softLimitHigh" value="7.9"></property>
		<property name="poll" value="false"></property>
	</bean>
	<bean id="dcm_crystal2_pitch_positioner" class="gda.oe.positioners.AngularPositioner">
		<property name="name" value="dcm_crystal2_pitch_positioner"></property>
		<property name="motorName" value="dcm_crystal2_pitch_motor"></property>
		<property name="stepsPerUnit" value="1"></property>
		<property name="softLimitLow" value="-0.9"></property>
		<property name="softLimitHigh" value="8.9"></property>
		<property name="poll" value="false"></property>
	</bean>
	<bean id="dcm_perp_positioner" class="gda.oe.positioners.LinearPositioner">
		<property name="name" value="dcm_perp_positioner"></property>
		<property name="motorName" value="dcm_perp_motor"></property>
		<property name="stepsPerUnit" value="1"></property>
		<property name="softLimitLow" value="-40.0"></property>
		<property name="softLimitHigh" value="40.0"></property>
		<property name="poll" value="false"></property>
	</bean>
	<bean id="dcm_bragg" class="gda.oe.dofs.EpicsAxisAngularDOF">
		<property name="name" value="dcm_bragg"></property>
		<property name="protectionLevel" value="0"></property>
		<property name="moveables">
			<list>
				<ref bean="dcm_bragg_positioner" />
			</list>
		</property>
		<property name="acceptableUnitNames">
			<list>
				<value>mDeg</value>
			</list>
		</property>
	</bean>
	<bean id="dcm_crystal1_roll" class="gda.oe.dofs.EpicsAxisAngularDOF">
		<property name="name" value="dcm_crystal1_roll"></property>
		<property name="protectionLevel" value="0"></property>
		<property name="moveables">
			<list>
				<ref bean="dcm_crystal1_roll_positioner" />
			</list>
		</property>		
	</bean>
	<bean id="dcm_crystal2_pitch" class="gda.oe.dofs.EpicsAxisAngularDOF">
		<property name="name" value="dcm_crystal2_pitch"></property>
		<property name="protectionLevel" value="0"></property>
		<property name="moveables">
			<list>
				<ref bean="dcm_crystal2_pitch_positioner" />
			</list>
		</property>		
	</bean>
	<bean id="dcm_perp" class="gda.oe.dofs.EpicsAxisLinearDOF">
		<property name="name" value="dcm_perp"></property>
		<property name="protectionLevel" value="0"></property>
		<property name="moveables">
			<list>
				<ref bean="dcm_perp_positioner" />
			</list>
		</property>
		<property name="acceptableUnitNames">
			<list>
				<value>mm</value>
			</list>
		</property>
	</bean>
	<bean id="dcm_mono" class="gda.oe.dofs.MonoDOF">
		<property name="name" value="dcm_mono"></property>
		<property name="protectionLevel" value="0"></property>
		<property name="moveables">
			<list>
				<ref bean="dcm_bragg_positioner" />
			</list>
		</property>	
		<property name="crystalType" value="Si111"></property>	
	</bean>
	<bean id="DCM" class="gda.oe.GenericOE">
	<property name="moveables">
		<list>
			<ref bean="dcm_bragg"/>
			<ref bean="dcm_crystal1_roll"/>
			<ref bean="dcm_crystal2_pitch"/>
			<ref bean="dcm_perp"/>
			<ref bean="dcm_mono"/>
		</list>
	</property>
	</bean>
	
	<!--  Sample Stage Optical Element  -->
	<bean id="sample_z_positioner" class="gda.oe.positioners.LinearPositioner">
		<property name="name" value="sample_z_positioner"></property>
		<property name="motorName" value="sample_z_motor"></property>
		<property name="stepsPerUnit" value="1"></property>
		<property name="softLimitLow" value="-25"></property>
		<property name="softLimitHigh" value="75"></property>
		<property name="poll" value="false"></property>
	</bean>
	
	<bean id="sample_thetacoarse_positioner" class="gda.oe.positioners.AngularPositioner">
		<property name="name" value="sample_thetacoarse_positioner"></property>
		<property name="motorName" value="sample_thetacoarse_motor"></property>
		<property name="stepsPerUnit" value="1"></property>
		<property name="softLimitLow" value="-45"></property>
		<property name="softLimitHigh" value="45"></property>
		<property name="poll" value="false"></property>
	</bean>
	
	<bean id="sample_x_positioner" class="gda.oe.positioners.LinearPositioner">
		<property name="name" value="sample_x_positioner"></property>
		<property name="motorName" value="sample_x_motor"></property>
		<property name="stepsPerUnit" value="1"></property>
		<property name="softLimitLow" value="-12.5"></property>
		<property name="softLimitHigh" value="12.5"></property>
		<property name="poll" value="false"></property>
	</bean>
	
	<bean id="sample_y1_positioner" class="gda.oe.positioners.LinearPositioner">
		<property name="name" value="sample_y1_positioner"></property>
		<property name="motorName" value="sample_y1_motor"></property>
		<property name="stepsPerUnit" value="1"></property>
		<property name="softLimitLow" value="-15"></property>
		<property name="softLimitHigh" value="15"></property>
		<property name="poll" value="false"></property>
	</bean>
	<bean id="sample_y2_positioner" class="gda.oe.positioners.LinearPositioner">
		<property name="name" value="sample_y2_positioner"></property>
		<property name="motorName" value="sample_y2_motor"></property>
		<property name="stepsPerUnit" value="1"></property>
		<property name="softLimitLow" value="-15"></property>
		<property name="softLimitHigh" value="15"></property>
		<property name="poll" value="false"></property>
	</bean>
	<bean id="sample_y3_positioner" class="gda.oe.positioners.LinearPositioner">
		<property name="name" value="sample_y3_positioner"></property>
		<property name="motorName" value="sample_y3_motor"></property>
		<property name="stepsPerUnit" value="1"></property>
		<property name="softLimitLow" value="-15"></property>
		<property name="softLimitHigh" value="15"></property>
		<property name="poll" value="false"></property>
	</bean>
	<bean id="sample_thetafine_positioner" class="gda.oe.positioners.AngularPositioner">
		<property name="name" value="sample_thetafine_positioner"></property>
		<property name="motorName" value="sample_thetafine_motor"></property>
		<property name="stepsPerUnit" value="1"></property>
		<property name="softLimitLow" value="-360000"></property>
		<property name="softLimitHigh" value="360000"></property>
		<property name="poll" value="false"></property>
	</bean>
	<bean id="sample_thetacoarse" class="gda.oe.dofs.EpicsAxisAngularDOF">
		<property name="name" value="sample_thetacoarse"></property>
		<property name="protectionLevel" value="0"></property>
		<property name="moveables">
			<list>
				<ref bean="sample_thetacoarse_positioner" />
			</list>
		</property>	
		<property name="acceptableUnitNames">
			<list>
				<value>Deg</value>
			</list>
		</property>	
	</bean>
	<bean id="sample_z" class="gda.oe.dofs.EpicsAxisLinearDOF">
		<property name="name" value="sample_z"></property>
		<property name="protectionLevel" value="0"></property>
		<property name="moveables">
			<list>
				<ref bean="sample_z_positioner" />
			</list>
		</property>
		<property name="acceptableUnitNames">
			<list>
				<value>mm</value>
			</list>
		</property>
	</bean>
	<bean id="MicroFocusSampleX" class="gda.oe.dofs.EpicsAxisLinearDOF">
		<property name="name" value="MicroFocusSampleX"></property>
		<property name="protectionLevel" value="0"></property>
		<property name="moveables">
			<list>
				<ref bean="sample_x_positioner" />
			</list>
		</property>
		<property name="acceptableUnitNames">
			<list>
				<value>mm</value>
			</list>
		</property>
	</bean>
	<bean id="sample_y1" class="gda.oe.dofs.EpicsAxisLinearDOF">
		<property name="name" value="sample_y1"></property>
		<property name="protectionLevel" value="0"></property>
		<property name="moveables">
			<list>
				<ref bean="sample_y1_positioner" />
			</list>
		</property>
		<property name="acceptableUnitNames">
			<list>
				<value>mm</value>
			</list>
		</property>
	</bean>
	<bean id="sample_y2" class="gda.oe.dofs.EpicsAxisLinearDOF">
		<property name="name" value="sample_y2"></property>
		<property name="protectionLevel" value="0"></property>
		<property name="moveables">
			<list>
				<ref bean="sample_y2_positioner" />
			</list>
		</property>
		<property name="acceptableUnitNames">
			<list>
				<value>mm</value>
			</list>
		</property>
	</bean>
	<bean id="sample_y3" class="gda.oe.dofs.EpicsAxisLinearDOF">
		<property name="name" value="sample_y3"></property>
		<property name="protectionLevel" value="0"></property>
		<property name="moveables">
			<list>
				<ref bean="sample_y3_positioner" />
			</list>
		</property>
		<property name="acceptableUnitNames">
			<list>
				<value>mm</value>
			</list>
		</property>
	</bean>
	<bean id="sample_thetafine" class="gda.oe.dofs.EpicsAxisAngularDOF">
		<property name="name" value="sample_thetafine"></property>
		<property name="protectionLevel" value="0"></property>
		<property name="moveables">
			<list>
				<ref bean="sample_thetafine_positioner" />
			</list>
		</property>
		<property name="acceptableUnitNames">
			<list>
				<value>Deg</value>
			</list>
		</property>
	</bean>
	<bean id="identity1" class="gda.function.IdentityFunction"/>
	<bean id="identity2" class="gda.function.IdentityFunction"/>
	<bean id="identity3" class="gda.function.IdentityFunction"/>
	
	<bean id="MicroFocusSampleY" class="gda.oe.dofs.CoupledDOF">
		<property name="name" value="MicroFocusSampleY"></property>
		<property name="protectionLevel" value="0"></property>
		<property name="moveables">
			<list>
				<ref bean="sample_y1" />
				<ref bean="sample_y2" />
				<ref bean="sample_y3" />
			</list>
		</property>
		<property name="acceptableUnitNames">
			<list>
				<value>mm</value>
			</list>
		</property>
		<property name="functionList">
			<list>
				<ref bean="identity1"/>
				<ref bean="identity2"/>				
				<ref bean="identity3"/>				
			</list>
		</property>
	</bean>
	
	<bean id="microfocusXZ" class="gda.oe.dofs.CombinedDOF">
		<property name="name" value="microfocusXZ"></property>
		<property name="protectionLevel" value="0"></property>
		<property name="moveables">
			<list>
				<ref bean="sample_z" />
				<ref bean="sample_xz" />
			</list>
		</property>
		<property name="moveableToReport" value="sample_z"></property>
		<property name="evalLowerLimit" value="true"></property>
		<property name="evalUpperLimit" value="true"></property>
	</bean>
	
	<bean id="sample_xz" class="gda.oe.dofs.CombinedDOF">
		<property name="name" value="sample_xz"></property>
		<property name="protectionLevel" value="0"></property>
		<property name="moveables">
			<list>
				<ref bean="MicroFocusSampleX" />
			</list>
		</property>
		<property name="converterName" value="xz_converter"></property>
		<property name="evalLowerLimit" value="true"></property>
		<property name="evalUpperLimit" value="true"></property>
	</bean>
	<bean id="MicroFocusSampleStage" class="gda.oe.GenericOE">
	<property name="moveables">
		<list>
			<ref bean="sample_thetacoarse"/>
			<ref bean="sample_z"/>
			<ref bean="MicroFocusSampleX"/>
			<ref bean="sample_y1"/>
			<ref bean="sample_y2"/>
			<ref bean="sample_y3"/>
			<ref bean="sample_thetafine"/>
			<ref bean="MicroFocusSampleY"/>
			<ref bean="microfocusXZ"/>
			<ref bean="sample_xz"/>
		</list>
	</property>
	</bean>
	
<!--  combodcm controller -->
	<bean id="comboDCM_eV" class="gda.oe.dofs.CombinedDOF">
		<property name="name" value="comboDCM_eV"></property>
		<property name="protectionLevel" value="0"></property>
		<property name="moveables">
			<list>
				<ref bean="comboDCM_d" />
			</list>
		</property>
		<property name="converterName" value="eV_mDeg_converter"></property>
		<property name="softLimitLow" value="2000"></property>
		<property name="softLimitHigh" value="25000"></property>
		<property name="evalLowerLimit" value="false"></property>
		<property name="evalUpperLimit" value="false"></property>
		<property name="updatePositionFromMoveables" value="true"></property>
	</bean>
	
	<bean id="dcm_perp_mDeg" class="gda.oe.dofs.CombinedDOF">
		<property name="name" value="dcm_perp_mDeg"></property>
		<property name="protectionLevel" value="0"></property>
		<property name="moveables">
			<list>
				<ref bean="dcm_perp" />
			</list>
		</property>
		<property name="converterName" value="mDeg_dcm_perp_mm_converter"></property>
	</bean>
	<bean id="idgap_mDeg" class="gda.oe.dofs.CombinedDOF">
		<property name="name" value="idgap_mDeg"></property>
		<property name="protectionLevel" value="0"></property>
		<property name="moveables">
			<list>
				<ref bean="idgap" />
			</list>
		</property>
		<property name="converterName" value="auto_mDeg_idGap_mm_converter"></property>
		<property name="evalLowerLimit" value="true"></property>
		<property name="evalUpperLimit" value="true"></property>
	</bean>
	<bean id="comboDCM_d" class="gda.oe.dofs.CombinedDOF">
		<property name="name" value="comboDCM_d"></property>
		<property name="protectionLevel" value="0"></property>
		<property name="moveables">
			<list>
				<ref bean="dcm_bragg" />
				<ref bean="idgap_mDeg" />
				<ref bean="dcm_perp_mDeg" />
			</list>
		</property>
		<property name="moveableToReport" value="dcm_bragg"></property>
		<property name="softLimitLow" value="4536.65"></property>
		<property name="softLimitHigh" value="81382.25"></property>
		<property name="evalLowerLimit" value="false"></property>
		<property name="evalUpperLimit" value="false"></property>
	</bean>
	<bean id="comboDCM_nogap" class="gda.oe.dofs.CombinedDOF">
		<property name="name" value="comboDCM_nogap"></property>
		<property name="protectionLevel" value="0"></property>
		<property name="moveables">
			<list>
				<ref bean="dcm_bragg" />
				<ref bean="dcm_perp_mDeg" />
			</list>
		</property>
		<property name="moveableToReport" value="dcm_bragg"></property>
		<property name="softLimitLow" value="4536.65"></property>
		<property name="softLimitHigh" value="81382.25"></property>
		<property name="evalLowerLimit" value="false"></property>
		<property name="evalUpperLimit" value="false"></property>
	</bean>
	
	<bean id="ComboDCMController" class="gda.oe.GenericOE">
	<property name="moveables">
		<list>
			<ref bean="comboDCM_eV"/>
			<ref bean="dcm_perp_mDeg"/>
			<ref bean="idgap_mDeg"/>
			<ref bean="comboDCM_d"/>
			<ref bean="comboDCM_nogap"/>
		</list>
	</property>
	</bean>
</beans>
