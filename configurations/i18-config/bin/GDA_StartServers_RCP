#!/bin/bash
unset GDA_ROOT
unset GDA_CONFIG
unset GDA_USERS

unset GDA_JARS
unset CLASSPATH
gdaLocation=`dirname $0`/../..
abs=`cd $gdaLocation ; pwd`
echo $abs
gdaLocation=$abs
#export JAVA_HOME=$gdaLocation/java/jre
gdaLauncher=$gdaLocation/gda/plugins/uk.ac.gda.core/bin/gda
config=$gdaLocation/gda/i18-config
users=/dls/$BEAMLINE
properties=$config/properties/java.rcp.properties
jacorb=$config/properties
echo "the gda startup location is"
echo $gdaLauncher
echo $gdaLauncher --config=$config --properties=$properties --jacorb=$jacorb logserver
$gdaLauncher --config=$config  --properties=$properties --jacorb=$jacorb --verbose logserver

#echo $gdaLauncher nameserver
$gdaLauncher --config=$config --properties=$properties  --jacorb=$jacorb nameserver

#echo $gdaLauncher eventserver
$gdaLauncher --config=$config --properties=$properties  --jacorb=$jacorb eventserver

#export JAVA_OPTS="-Xms512m -Xmx2048m -XX:PermSize=182m -XX:MaxPermSize=786m -XX:+DisableExplicitGC"
#export gda.nexus.instrumentApi=true
#echo $gdaLauncher objectserver
#export PROFILER_DIR=/dls_sw/dasc/jprofiler5
#$gdaLauncher -d --config=$config --properties=$properties  --jacorb=$jacorb  objectserver --profiler --profilerport=8849 -v
##$gdaLauncher -d --config=$config --properties=$properties  --jacorb=$jacorb  objectserver --profiler -v
JAVA_OPTS="-Xms512m -Xmx8000m -XX:PermSize=182m -XX:MaxPermSize=786m -XX:+DisableExplicitGC" $gdaLauncher --config=$config --properties=$properties  --jacorb=$jacorb  objectserver -d --verbose
#echo $gdaLauncher objectserver
