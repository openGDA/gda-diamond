#!/bin/bash
unset GDA_ROOT
unset GDA_CONFIG
unset GDA_USERS
unset GDA_JARS
unset CLASSPATH
gdaLocation=`dirname $0`/../..
abs=`cd $gdaLocation ; pwd`
echo $abs
gdaLocation=$abs
gdaLauncher=/dls_sw/i18/software/gda/plugins/uk.ac.gda.core/bin/gda
config=$gdaLocation/i18-config
users=/dls/$BEAMLINE
properties=$config/properties/java.rcp.properties
jacorb=$config/properties

echo "the gda startup location is"
echo $gdaLauncher
echo $gdaLauncher --config=$config --properties=$properties --jacorb=$jacorb logserver

#module load java

$gdaLauncher --config=$config --properties=$properties --jacorb=$jacorb --verbose logserver
$gdaLauncher --config=$config --properties=$properties --jacorb=$jacorb nameserver
$gdaLauncher --config=$config --properties=$properties --jacorb=$jacorb eventserver

#export gda.nexus.instrumentApi=true

JAVA_OPTS="-Xms1024m -Xmx8000m -XX:PermSize=512m -XX:MaxPermSize=2048m -XX:+DisableExplicitGC -Dgda.nexus.instrumentApi=true" /dls_sw/i18/software/gda_versions/gda_822ws/plugins/uk.ac.gda.core/bin/gda --config=$config --properties=$properties --jacorb=$jacorb objectserver  --debug -p 8000 -v
