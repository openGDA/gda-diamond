<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
		http://www.springframework.org/schema/beans/spring-beans.xsd"
	profile="NexusScanDataWriter">

	<!-- NXDetectors -->

	<!-- Sadly NXDetectorSnappingDecorator doesn't allow you to use the same detector for snaps and scans,
		 like ProcessingDetectorWrapper does.
	 -->

	<!-- Add support for gda.device.detector.HardwareTriggeredNXDetector later -->

	<!-- Objects for Processing -->

	<bean id="pil3_100k" class="gda.device.detector.nexusprocessor.NexusDetectorProcessor" >
		<property name="detector">
			<bean class="gda.device.detector.NXDetector">
				<property name="name" value="pil3_100k" />
				<property name="collectionStrategy" ref="pilatus3_nxcollectionstrategy_for_scans_and_snaps"/>
				<property name="additionalPluginList">
					<list>
						<ref bean="pilatus3_nxfilewriter_for_scans" />
						<ref bean="pilatus3_hdf5filewriter_for_scans" />
					</list>
				</property>
			</bean>
		</property>
		<property name="processor">
			<bean class="gda.device.detector.nexusprocessor.SwmrHdfDatasetProviderProcessor">
				<property name="detName" value="pil3_100k" />
				<property name="processors">
					<list>
						<bean class="gda.device.detector.nexusprocessor.DatasetPlotter">
							<property name="plotName" ref="pilatus3_plotName" />
							<property name="roiProvider" ref="pilatus3_rois" />
						</bean>
						<ref bean="pilatus3_rois" />
						<ref bean="pilatus3_stats" />
					</list>
				</property>
				<property name="datasetCreator" >
					<bean id="pilatus3_mask" class="gda.device.detector.nexusprocessor.MaskedDatasetCreator" />
				</property>
				<!-- 
				<property name="detectorWidth" value="2068" />
				<property name="detectorHeight" value="2162" />
				<property name="useUidDataset" value="true" />
				 -->
			</bean>
		</property>
	</bean>

	<bean id="pilatus3_plotName" class="java.lang.String" factory-method="valueOf">
		<constructor-arg value="Pilatus"/>
	</bean>

	<bean id="pilatus3_rois" class="gda.device.detector.nexusprocessor.roistats.RoiStatsProcessor">
		<property name="plotName" ref="pilatus3_plotName" />
		<property name="statsProcessor" ref="pilatus3_stats" />
		<property name="requiredRectangularRoiList">
			<list>
				<bean class="org.eclipse.dawnsci.analysis.dataset.roi.RectangularROI">
					<property name="name" value="roi1" />
					<property name="plot" value="true" />
					<property name="fixed" value="true" />
					<property name="point">
						<array>
							<value>232</value>
							<value>98</value>
						</array>
					</property>
					<property name="lengths">
						<array>
							<value>13</value>
							<value>15</value>
						</array>
					</property>
				</bean>
				<bean class="org.eclipse.dawnsci.analysis.dataset.roi.RectangularROI">
					<property name="name" value="roi2" />
					<property name="plot" value="true" />
					<property name="fixed" value="true" />
					<property name="point">
						<array>
							<value>214</value>
							<value>81</value>
						</array>
					</property>
					<property name="lengths">
						<array>
							<value>50</value>
							<value>50</value>
						</array>
					</property>
				</bean>
			</list>
		</property>
	</bean>

	<bean id="pilatus3_stats" class="gda.device.detector.nexusprocessor.DatasetStats">
		<property name="enabledStats">
			<list>
				<value>MAX_VAL</value>
				<value>MAX_X</value>
				<value>MAX_Y</value>
				<value>SUM</value>
			</list>
		</property>
	</bean>
</beans>
