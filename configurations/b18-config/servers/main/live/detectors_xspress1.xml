<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

	<bean id="GDAHashtable" class="gda.util.findableHashtable.FindableHashtable" />

	<bean id="hdf5"
		class="gda.device.detector.areadetector.v17.impl.NDFileHDF5Impl">
		<property name="basePVName" value="BL18B-EA-DET-03:HDF:" />
		<property name="file">
			<bean class="gda.device.detector.areadetector.v17.impl.NDFileImpl">
				<property name="basePVName" value="BL18B-EA-DET-03:HDF:" />
				<property name="initialAutoIncrement" value="0" />
				<property name="initialAutoSave" value="0" />
				<property name="initialWriteMode" value="0" />
				<property name="initialNumCapture" value="1" />
				<property name="initialFileName" value="helloworld" />
				<property name="initialFileTemplate" value="%s%s-%d.h5" />
				<property name="pluginBase">
					<bean class="gda.device.detector.areadetector.v17.impl.NDPluginBaseImpl">
						<property name="basePVName" value="BL18B-EA-DET-03:HDF:" />
					</bean>
				</property>
			</bean>
		</property>
	</bean>

	<bean id="edxdcontroller" class="gda.device.detector.xmap.edxd.EDXDMappingController">
		<property name="epicsDeviceName" value="xmap_dxp" />
		<property name="elementOffset" value="1" />
		<property name="local" value="true" />
		<property name="NUMBER_OF_ELEMENTS" value="4" />
		<property name="hdf5" ref="hdf5" />
	</bean>

	<bean id="xmapcontroller" class="gda.device.detector.xmap.EpicsXmapController3">
		<property name="edxdControllerName" value="edxdcontroller" />
		<property name="local" value="true" />
	</bean>

	<bean id="qexafs_xmap" class="gda.device.detector.xmap.XmapBufferedDetector">
		<property name="xmap" ref="xmapMca" />
		<property name="controller" ref="edxdcontroller" />
		<property name="daServer" ref="DAServer" />
		<property name="local" value="true" />
		<property name="inputNames">
			<list>
			</list>
		</property>
		<property name="capturepv" value="BL18B-EA-DET-03:HDF:Capture" />
		<property name="deadTimeEnabled" value = "false" />
	</bean>


	<bean id="DAServer" class="gda.device.detector.DAServer">
		<property name="local" value="True" />
		<property name="host" value="b18-xspress1" />
		<property name="port" value="1972" />
		<property name="startupCommands">
			<list>
				<value>~config</value>
				<value>tfg setup-veto veto1-inv 1</value>
			</list>
		</property>
		<property name="dataPort" value="20030" />
		<property name="replyTimeOut" value="5000" />
	</bean>

	<bean id="struckScaler" class="gda.device.detector.EpicsScaler">
		<property name="pvName" value="BL18B-EA-DET-01:SCALER" />
	</bean>
	
	<bean id="adc" class="gda.device.detector.GeFanuc110BLADC">
		<property name="samplingRate_pv" value="BL18B-EA-GEADC-01:CLOCKRATE" />
		<property name="numberOfChannels_pv" value="BL18B-EA-GEADC-01:CHANNELS" />
		<property name="useSoftwareGate_pv" value="BL18B-EA-GEADC-01:GATEENABLE" />
		<property name="noSamplesToAvg_pv" value="BL18B-EA-GEADC-01:SAMPLESTOAVERAGE" />
		<property name="gateChannel_pv" value="BL18B-EA-GEADC-01:GATECHANNEL" />
		<property name="adcThreshold_pv" value="BL18B-EA-GEADC-01:GATETHRESHOLD" />
		<property name="enAcq_pv" value="BL18B-EA-GEADC-01:ACQUIRE" />
		<property name="runtimeDataProblem_pv" value="BL18B-EA-GEADC-01:RUNTIMEPROBLEM_RBV" />
		<property name="readStatus_pv" value="BL18B-EA-GEADC-01:READSTATUS" />
		<property name="fifoEmpty_pv" value="BL18B-EA-GEADC-01:STATUSFIFOEMPTY_RBV" />
		<property name="data_pv" value="BL18B-EA-GEADC-01:RAWDATA_1_RBV.VAL" />
		
	</bean>
	
	<bean id="QexafsFFI0" class="gda.device.detector.QexafsFFoverIO">
		<property name="qexafsXspress" ref="qexafs_xspress" />
		<property name="qexafsScaler" ref="qexafs_counterTimer01" />
	</bean>
	
	<bean id="VortexQexafsFFI0" class="gda.device.detector.xmap.VortexQexafsFFIO">
		<property name="qexafsXmap" ref="qexafs_xmap" />
		<property name="qexafsScaler" ref="qexafs_counterTimer01" />
	</bean>

	<bean id="mythen" class="gda.device.detector.mythen.MythenDetectorImpl">
		<property name="detectorID" value="b18-mcs01" />
		<property name="mythenClient">
			<bean class="gda.device.detector.mythen.client.TextClientMythenClient">
				<property name="mythenClientCommand"
					value="/dls_sw/b18/software/mythen/MythenSoft/bin/text_client" />
				<property name="host" value="b18-mcs01" />
			</bean>
		</property>

		<property name="dataConverter">
			<bean class="gda.device.detector.mythen.data.DataConverter">
				<property name="angularCalibrationParameters">
					<bean
						class="gda.device.detector.mythen.data.SimpleAngularCalibrationParameters">
						<constructor-arg>
							<bean class="java.io.File">
								<constructor-arg>
									<value>/dls_sw/b18/software/mythen/MythenSoft/module/calibration.dat</value>
								</constructor-arg>
							</bean>
						</constructor-arg>
					</bean>
				</property>
			</bean>
		</property>
	</bean>

<!-- 	<bean id="cirrus" class="uk.ac.gda.devices.cirrus.CirrusDetector"> -->
<!-- 		<property name="cirrusHost" value="b18-cirrus01" /> -->
<!-- 	</bean> -->

</beans>