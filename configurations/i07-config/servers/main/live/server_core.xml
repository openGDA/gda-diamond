<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:util="http://www.springframework.org/schema/util"
    xmlns:corba="http://www.diamond.ac.uk/schema/gda/corba"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
    http://www.springframework.org/schema/util 
    http://www.springframework.org/schema/util/spring-util-2.5.xsd
    http://www.diamond.ac.uk/schema/gda/corba 
    http://www.diamond.ac.uk/schema/gda/corba/gda-corba-1.0.xsd
    http://www.springframework.org/schema/tx 
    http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
    http://www.springframework.org/schema/aop 
    http://www.springframework.org/schema/aop/spring-aop-2.5.xsd">
    
    <bean id="GDAHashtable" class="gda.util.findableHashtable.FindableHashtable" />
    
    <bean id="GDAMetadata" class="gda.data.metadata.GdaMetadata">
        <property name="metadataEntries">
            <list>
                
                <bean class="gda.data.metadata.PropertyMetadataEntry">
                    <property name="name" value="instrument"/>
                    <property name="propertyName" value="gda.instrument"/>
                </bean>
                <bean class="gda.data.metadata.PropertyMetadataEntry">
                    <property name="name" value="defVisit"/>
                    <property name="propertyName" value="gda.defVisit"/>
                </bean>

                <bean class="gda.data.metadata.StoredMetadataEntry">
                    <property name="name" value="federalid" />
                </bean>
                <bean class="gda.data.metadata.StoredMetadataEntry">
                    <property name="name" value="visitid" />
                </bean>
                <bean class="gda.data.metadata.StoredScanMetadataEntry">
                    <property name="name" value="title" />
                    <property name="value" value="undefined" />
                </bean>
                <bean class="gda.data.metadata.StoredMetadataEntry">
                    <property name="name" value="note" />
                    <property name="value" value="undefined" />
                </bean>
                
				<ref bean="subdirectory" />

<!--
                <bean class="gda.data.metadata.PropertyMetadataEntry">
                    <property name="name" value="facility" />
                    <property name="propertyName" value="gda.facility" />
                </bean>
                <bean class="gda.data.metadata.PropertyMetadataEntry">
                    <property name="name" value="facilityType" />
                    <property name="propertyName" value="gda.facility.type" />
                </bean>
                <bean class="gda.data.metadata.PropertyMetadataEntry">
                    <property name="name" value="facilityMode" />
                    <property name="propertyName" value="CS-CS-MSTAT-01:MODE" />
                </bean>
                <bean class="gda.data.metadata.PropertyMetadataEntry">
                    <property name="name" value="fillMode" />
                    <property name="propertyName" value="LI-TI-MTGEN-01:MODE" />
                </bean>
                <bean class="gda.data.metadata.PropertyMetadataEntry">
                    <property name="name" value="probe" />
                    <property name="propertyName" value="gda.facility.probe" />
                </bean>
                <bean class="gda.data.metadata.PropertyMetadataEntry">
                    <property name="name" value="beamcurrent" />
                    <property name="propertyName" value="SR-DI-DCCT-01:SIGNAL" />
                </bean>
                <bean class="gda.data.metadata.ScannableMetadataEntry">
                    <property name="name" value="instrument.monochromator.energy"/>
                    <property name="scannableName" value="MonoEnergy"/>
                </bean>
-->                
                
            </list>
        </property>
    </bean>
    
    <bean id="ScanDataStore" class="gda.util.simpleServlet.FindableSimpleServlet" />
    <bean id="SimpleServlet" class="gda.util.simpleServlet.FindableSimpleServlet" />
    
    <bean id="Plot_Manager" class="gda.analysis.plotmanager.PlotManager" />
<!--    <bean id="Current_Scan_Holder" class="gda.analysis.utils.CurrentScanHolder" />-->
    
    <bean id="plot_server" class="uk.ac.diamond.scisoft.analysis.plotserver.PlotServerBase" />


<!--
    <bean id="imageFitter" class="gda.device.detector.nexusprocessor.DataSetFitter">
        <property name="enable" value="false" />
    </bean>
    <bean id="imageStats" class="gda.device.detector.nexusprocessor.DatasetStats" >
        <property name="enable" value="false" />
    </bean>
    <bean id="imagePlotter" class="gda.device.detector.nexusprocessor.DataSetPlotter">
        <property name="plotName" value="Detector Image" />
        <property name="enable" value="false" />
    </bean>
    <bean id="imageROI" class="gda.device.detector.nexusprocessor.DatasetCreatorFromROI" >
        <property name="enable" value="false" />
    </bean>
    
    
    <util:list id="imageProcessors"
        value-type="gda.device.detector.nexusprocessor.DataSetProcessor">
        <ref bean="imageFitter" />
        <ref bean="imageStats" />
        <ref bean="imagePlotter" />
    </util:list>
-->    


    <!-- Automatic archiving and indexing -->
    <bean id="FileRegistrar" class="gda.data.fileregistrar.FileRegistrar">
        <property name="name" value="FileRegistrar" />
        <!--  <property name="directory" value="/dls/bl-misc/dropfiles/icat/dropZone/${gda.instrument}-" /> -->
        <property name="directory" value="/dls/bl-misc/dropfiles2/icat/dropZone/${gda.instrument}-" />
    </bean>
    <bean id="DefaultDataWriterFactory" class="gda.data.scan.datawriter.DefaultDataWriterFactory">
        <property name="name" value="DataWriterFactory" />
        <property name="dataWriterExtenders" >
            <list>
                <ref bean="FileRegistrar" />
            </list>
        </property>
    </bean>
  
	<bean id="subdirectory" class="gda.data.metadata.SubdirectoryMetadataEntry" />

	<bean id="observableSubdirectory" class="gda.data.metadata.MetadataBlaster" >
		<property name="storedMetadataEntry" ref="subdirectory" />
	</bean>
  
    <bean id="jythonServerFacade" class="gda.jython.JythonServerFacade">
        <constructor-arg ref="command_server" />
    </bean>
    
    <!--    <bean id="ExafsScriptObserver" class="gda.jython.scriptcontroller.ScriptControllerBase">
        </bean>
    -->    
</beans>
