#!/bin/bash

usage()
{
	echo "To start GDA Servers on locally or remotely on beamline control server"
	echo "Usage:"
	echo "       gdaserver local"
	echo "   or:"
	echo "       gdaserver remote"
}


if [ $# -ne 1 ]; then
	usage
	exit 1
fi


if [ ! -n "$BEAMLINE" ];
then
  echo "Please set BEAMLINE environment variable."
  exit 1
fi

if [ ! -n "$GDA_HOME" ]; then
	GDA_HOME=/dls_sw/$BEAMLINE/software/gda
	echo "No GDA_HOME setup, gdaserver script is setting GDA_HOME to $GDA_HOME."
fi

if [ ! -n "$GDA_CONFIG" ]; then
	export GDA_CONFIG=$GDA_HOME/config
	echo "No GDA_CONFIG setup, gdaserver script is setting GDA_CONFIG to $GDA_CONFIG."
fi



gdaLauncher=$GDA_HOME/plugins/uk.ac.gda.core/bin/gda 


if [ $1 = "local" ]; then
	echo "To start GDA Servers locally."
	$GDA_CONFIG/bin/GDA_LocalStart_Lin
elif [ $1 = "remote" ]; then
	echo "Starting GDA Servers on Beamline Control Server. Calling $GDA_CONFIG/bin/GDA_RemoteStart_Lin"
	$GDA_CONFIG/bin/GDA_RemoteStart_Lin
else
	usage
	exit 1
fi
