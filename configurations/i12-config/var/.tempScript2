#scan several camera positions
tomopos=1001.300     # tomography position centre of rotation (corrected from 1002.358)
flatpos=900         # ss1.x position for flatfields
exp=.50             # exposure time
anglestep=0.25       #angle(360/1440) 
camware.resetCounter()

#open the shutter in case it's  closed
caput("BL12I-PS-SHTR-02:CON", 0) ### 1 is closed. 0 is open

pos t3.m1z -1750
#script edited to enable re-start after scan crashed during night
#for campos in (0,-250,-500,-750,-1000,-1250,-1500,-1750,-1819.6):
for campos in (-1750,-1819.6):
   ### 1 do one tomography + flatfield
   #do a flatfield
   print "Flatfield before %i" % campos
   pos ss1.x flatpos
   scan dum.a 0 1 0.05 camware (exp+0.5) ring topup (exp+2) ss1 t3 s1 s2 
   #go to the sample
   print "moving to the sample %i" % campos
   pos ss1.x tomopos
   pos t3.m1z campos
   #do a scan
   print "tomography scan %i"  % campos
   scan ss1.theta  0 360 anglestep camware exp ring topup (exp+2) fastscan
   #####


#do a flat field
print "Flatfield after"
pos ss1.x flatpos
scan dum.a 0 1 0.05 camware (exp+0.5) ring topup (exp+2)


#close the shutter	
caput("BL12I-PS-SHTR-02:CON", 1) ### 1 is closed. 0 is open

#do a dark field 
print "Dark Field"
scan dum.a 0 1 0.05 camware (exp+0.5)  ring topup (exp+2) ss1 t3 s1 s2 
print "Complete -- now stop the acquisition in CamWare"
print "PRESS THE WHITE SQUARE ICON AT THE TOP LEFT OF THE CAMWARE WINDOW"

