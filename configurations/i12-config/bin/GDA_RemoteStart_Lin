#!/bin/bash
##This is an example script file to restart GDA server from a remote workstation
##This requires generation of ssh keys and copying the public key to the authorized_keys file in the server
##Please refer to the document howtoSSH.txt for key generation.
##To use this script change the key file path, user name and the server machine name


if [ ! -n "$BEAMLINE" ];
then
  echo "Please set BEAMLINE environment variable."
  exit 1
fi

echo "Kill all GDA Clients running locally"
gda --stop client
sleep 2;

echo "Restaring GDA Log Panel locally"
echo gda --restart logpanel &
gda --restart logpanel &
sleep 2
 
echo "Starting GDA Servers remotely..."
echo ssh -i /$SOFTWAREFOLDER/$BEAMLINE/${BEAMLINE}ssh.key gda@${BEAMLINE}-control.diamond.ac.uk
ssh -i /$SOFTWAREFOLDER/$BEAMLINE/${BEAMLINE}ssh.key gda@${BEAMLINE}-control.diamond.ac.uk

