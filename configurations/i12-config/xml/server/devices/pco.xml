<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">
	
	<!-- Set up the Area Detector class which will manager the PCO camea -->
	<bean id="PCOAreaDetector" class="gda.device.detector.areadetector.EpicsAreaDetector">
		<property name="basePVName" value="TEST:PCO1:" />
		<property name="initialDataType" value="UInt16" />
		<property name="initialMinX" value="1" />
		<property name="initialMinY" value="1" />
		<property name="initialSizeX" value="4008" />
		<property name="initialSizeY" value="2672" />
		<property name="initialBinX" value="1" />
		<property name="initialBinY" value="1" />
	</bean>
	
	<!-- Set up the Region of interest manager -->
	<bean id="PCOAreaDetectorROI" class="gda.device.detector.areadetector.EpicsAreaDetectorROI">
		<property name="basePVName" value="TEST:ROI:" />
	</bean>
	
	<!-- Full frame parts for the acquisition mode -->
	<!-- First set up the ROI which will be used for the real acquisitions, i.e the full available frame -->
	<bean id="PCOFullImageROI" class="gda.device.detector.areadetector.EpicsAreaDetectorROIElement">
		<property name="basePVName" value="TEST:ROI:0:" />
		<property name="initialDataType" value="UInt16" />
		<property name="initialMinX" value="0" />
		<property name="initialMinY" value="0" />
		<property name="initialSizeX" value="4008" />
		<property name="initialSizeY" value="2672" />
		<property name="initialBinX" value="1" />
		<property name="initialBinY" value="1" />
	</bean>
	
	<!-- Now set up 3 File savers which are associated with it -->
	<bean id="PCODataImageFileSave" class="gda.device.detector.areadetector.EpicsAreaDetectorFileSave">
		<property name="basePVName" value="TEST:TIFF0:" />
		<property name="initialFileName" value="p" />
		<property name="initialFileTemplate" value="%s/%s_%05d.tiff" />
		<property name="initialAutoIncrement" value="Yes" />
		<property name="initialAutoSave" value="Yes" />
		<property name="initialWriteMode" value="Single" />
		<property name="initialNumCapture" value="0" />
		<property name="initialArrayPort" value="mypco" />
		<property name="initialArrayAddress" value="0" />
	</bean>	

	<bean id="PCODarkImageFileSave" class="gda.device.detector.areadetector.EpicsAreaDetectorFileSave">
		<property name="basePVName" value="TEST:TIFF1:" />
		<property name="initialFileName" value="d" />
		<property name="initialFileTemplate" value="%s/%s_%05d.tiff" />
		<property name="initialAutoIncrement" value="Yes" />
		<property name="initialAutoSave" value="Yes" />
		<property name="initialWriteMode" value="Single" />
		<property name="initialNumCapture" value="0" />
		<property name="initialArrayPort" value="mypco" />
		<property name="initialArrayAddress" value="0" />
	</bean>	
	
	<bean id="PCOFlatImageFileSave" class="gda.device.detector.areadetector.EpicsAreaDetectorFileSave">
		<property name="basePVName" value="TEST:TIFF2:" />
		<property name="initialFileName" value="f" />
		<property name="initialFileTemplate" value="%s/%s_%05d.tiff" />
		<property name="initialAutoIncrement" value="Yes" />
		<property name="initialAutoSave" value="Yes" />
		<property name="initialWriteMode" value="Single" />
		<property name="initialNumCapture" value="0" />
		<property name="initialArrayPort" value="mypco" />
		<property name="initialArrayAddress" value="0" />
	</bean>	
	
	<!-- Image Recording Section -->
	<bean id="PCOBinnedImageROI" class="gda.device.detector.areadetector.EpicsAreaDetectorROIElement">
		<property name="basePVName" value="TEST:ROI:1:" />
		<property name="initialDataType" value="UInt32" />
		<property name="initialMinX" value="0" />
		<property name="initialMinY" value="0" />
		<property name="initialSizeX" value="4008" />
		<property name="initialSizeY" value="2672" />
		<property name="initialBinX" value="4" />
		<property name="initialBinY" value="4" />
	</bean>
	
	<bean id="PCOImageArray" class="gda.device.detector.areadetector.EPICSAreaDetectorImage">
		<property name="basePVName" value="TEST:ARR1:" />
		<property name="initialArrayPort" value="pcoROI" />
		<property name="initialArrayAddress" value="1" />
	</bean>	
	
	<bean id="PCOPreview" class="gda.device.detector.areadetector.AreaDetectorLiveView">
		<property name="name" value="PCOPreview" />
		<property name="image" ref="PCOImageArray" />
		<property name="imageROI" ref="PCOBinnedImageROI" />
		<property name="refreshTime" value="1000" />
		<property name="plotName" value="PCOPlot" />
	</bean>	
	
	<!-- The actual camera definition -->
	<bean id="pco" class="gda.device.detector.pco.PCOController">
		<property name="areaDetector" ref="PCOAreaDetector" />
		<property name="areaDetectorROI" ref="PCOAreaDetectorROI" />
		<property name="fullFrameROI" ref="PCOFullImageROI" />
		<property name="dataSaver" ref="PCODataImageFileSave" />
		<property name="darkSaver" ref="PCODarkImageFileSave" />
		<property name="flatSaver" ref="PCOFlatImageFileSave" />
		<property name="previewROI" ref="PCOBinnedImageROI" />
		<property name="image" ref="PCOImageArray" />
		<property name="live" ref="PCOPreview" />

		<property name="projectionFoldername" value="projections" />	
		<property name="readout1ADC8Mhz" value="1500" />	
		<property name="readout1ADC32Mhz" value="500" />	
		<property name="readout2ADC8Mhz" value="750" />	
		<property name="readout2ADC32Mhz" value="400" />	
		<property name="localFilePath" value="d:/tmp/" />	
		<property name="numTrackerTag" value="i12" />
		<property name="triggerPV" value="BL12I-EA-DIO-01:OUT:00" />	
		
	</bean>

</beans>