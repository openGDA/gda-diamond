#!/bin/bash
#
#GUI frontend of the JacORB Naming Service
#

# Determine the machine platform and OS.
LIBRARY_SUBDIR=`uname`-`uname -i`
LD_LIBRARY_PATH=${GDA_ROOT}/lib/${LIBRARY_SUBDIR}:$LD_LIBRARY_PATH; export LD_LIBRARY_PATH


#Name of the shell script being executed:
scriptName=$0
#Number of the shell arguments:
numArgs=$# 

if [ ${numArgs} -eq 1 ]
then
	JACORB_OAPORT=$1
	export JACORB_OAPORT;
	echo "${scriptName} --> User specified Jacorb port: ${JACORB_OAPORT}"
else
	echo "$scriptName --> Usage: GDA_StartJacorbFrontEnd port"
	exit
fi

if [ -z "$JACORB_CONFIG_DIR" ]
then
	export JACORB_CONFIG_DIR=${GDA_CONFIG}/properties
fi

GDA_PROCESSES_TO_KILL="org.jacorb.naming.namemanager.NameManager";export GDA_PROCESSES_TO_KILL
GDA_KillProcess

echo "Starting JacORB Naming Service Manager"
echo java -Djacorb.config.dir=${JACORB_CONFIG_DIR} -Dorg.omg.CORBA.ORBClass=org.jacorb.orb.ORB -Dorg.omg.CORBA.ORBSingletonClass=org.jacorb.orb.ORBSingleton -DOAPort=${JACORB_OAPORT} org.jacorb.naming.namemanager.NameManager
java -Djacorb.config.dir=${JACORB_CONFIG_DIR} -Dorg.omg.CORBA.ORBClass=org.jacorb.orb.ORB -Dorg.omg.CORBA.ORBSingletonClass=org.jacorb.orb.ORBSingleton -DOAPort=${JACORB_OAPORT} org.jacorb.naming.namemanager.NameManager &
sleep 1

