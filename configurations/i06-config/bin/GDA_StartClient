#!/bin/bash

if [ ! -n "$BEAMLINE" ];
then
  echo "Please set BEAMLINE environment variable."
  exit 1
fi

##To remove the user's Eclipse RCP workspace 
tp=/tmp/.workspace-`whoami`
rm -f -R $tp

#To find the OS type
if [ `uname -p | grep -c i686` -eq 1 ]; then
    outputDir=client/${BEAMLINE}.gtk.linux.x86
elif [ `uname -p | grep -c x86_64` -eq 1 ]; then
    outputDir=client/${BEAMLINE}.gtk.linux.x86_64
fi

outputDir=client

#To set the Eclipse debug port
case $BEAMLINE in
	i06) DebugPort=8001 ;;
	i06-1) DebugPort=8003 ;;
	*) exit
esac

#export gdaLauncher=/dls_sw/$BEAMLINE/software/gda_git/gda-core.git/uk.ac.gda.core/bin/gda

configDir=/dls_sw/$BEAMLINE/software/gda/i06-config
Properties=$configDir/properties/java.properties_$BEAMLINE 
JacorbDir=$configDir/properties/jacorb_$BEAMLINE
varDir=/dls/$BEAMLINE/var
dataDir=/dls/$BEAMLINE
#logDir=/dls/$BEAMLINE/logs
logDir=/dls_sw/$BEAMLINE/logs


#To run the RCP client directly
/dls_sw/${BEAMLINE}/software/gda/${outputDir}/gda-${BEAMLINE} &


