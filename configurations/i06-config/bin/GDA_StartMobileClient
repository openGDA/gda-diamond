#!/bin/bash

if [ ! -n "$BEAMLINE" ];
then
  echo "Please set BEAMLINE environment variable."
  exit 1
fi

##To remove the user's Eclipse RCP workspace 
tp=/tmp/.workspace-local-`whoami`
rm -f -R $tp

#To set the Eclipse debug port
DebugPort=8000

export gdaLauncher=/dls_sw/$BEAMLINE/software/gda_git/gda-core.git/uk.ac.gda.core/bin/gda


configDir=/dls_sw/$BEAMLINE/software/gda/i06-config
Properties=$configDir/properties/java.properties_mobilerack
JacorbDir=$configDir/properties/jacorb_i06_local
varDir=/tmp/gda/var
dataDir=/tmp/gda
logDir=/tmp/gda/logs

JCAFile=$configDir/properties/JCALibrary.properties_mobilerack

#To run the RCP client by invoking the image
#JAVA_OPTS="-Xms512m -Xmx1024m -XX:PermSize=182m -XX:MaxPermSize=786m -XX:+DisableExplicitGC" $gdaLauncher --config=$configDir --properties=$Properties --jacorb=$JacorbDir --vardir=$varDir --datadir=$dataDir --logsdir=$logDir --rcp_image=/dls_sw/${BEAMLINE}/software/gda/client/gda-${BEAMLINE} --start rcpclient &
#--jca



#To run the RCP client directly
/dls_sw/${BEAMLINE}/software/gda/client/gda-${BEAMLINE} -vmargs -Declipse.pluginCustomization=/dls_sw/i06-1/software/gda/i06-config/client/i06-1/pluginCustomization.ini -Duk.ac.diamond.scisoft.analysis.analysisrpcserverprovider.disable=true -Duk.ac.diamond.scisoft.analysis.rmiserverprovider.disable=true -Dgda.install.git.loc=/dls_sw/i06-1/software/gda.git -Dgda.install.workspace.loc=/dls_sw/i06-1/software/gda -Dgda.data=$dataDir -Dgda.var=$varDir -Dgda.logs.dir=$logDir -Djacorb.config.dir=$JacorbDir -Dgda.propertiesFile=$Properties -Dgda.config=$configDir -Dgov.aps.jca.JCALibrary.properties=$JCAFile

#-vmargs -Declipse.pluginCustomization=/dls_sw/i06-1/software/gda/i06-config/client/i06-1/pluginCustomization.ini -Duk.ac.diamond.scisoft.analysis.analysisrpcserverprovider.disable=true -Duk.ac.diamond.scisoft.analysis.rmiserverprovider.disable=true -Dgda.install.git.loc=/dls_sw/i06-1/software/gda.git -Dgda.install.workspace.loc=/dls_sw/i06-1/software/gda -Dgda.data=$dataDir -Dgda.var=$varDir -Dgda.logs.dir=$logDir -Djacorb.config.dir=$JacorbDir -Dgda.propertiesFile=$Properties -Dgda.config=$configDir -Dgov.aps.jca.JCALibrary.properties=$JCAFile

