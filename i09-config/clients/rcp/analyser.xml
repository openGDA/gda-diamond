<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
	xmlns:corba="http://www.diamond.ac.uk/schema/gda/corba" xmlns:gda="http://www.diamond.ac.uk/schema/gda/gda"
	xmlns:util="http://www.springframework.org/schema/util"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
		http://www.diamond.ac.uk/schema/gda/corba http://www.diamond.ac.uk/schema/gda/corba/gda-corba-1.0.xsd
		http://www.diamond.ac.uk/schema/gda/gda http://www.diamond.ac.uk/schema/gda/gda/gda-gda-1.0.xsd
		http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd">

<!-- <bean id="analyserAdBaseModel" class="uk.ac.gda.epics.client.views.model.impl.ADBaseModelImpl">  -->
<!-- 		<property name="basePVName" value="BL09I-EA-DET-01:CAM:" /> -->
<!-- </bean>  -->

<!-- 	<bean id="analyserFileSaverModel" -->
<!-- 		class="uk.ac.gda.epics.client.views.model.impl.FileSaverModelImpl"> -->
<!-- 		<property name="basePVName" value="ELECTRON-ANALYSER-01:HDF:" /> -->
<!-- 	</bean> -->

<!-- 	<bean id="analyserFfmjpeg" -->
<!-- 		class="uk.ac.gda.epics.client.views.model.impl.FFMjpegModelImpl"> -->

<!-- 		<property name="basePVName" value="ELECTRON-ANALYSER-01:MPG:" /> -->
<!-- 	</bean> -->

<!-- 	<bean id="analyserNdProc" class="uk.ac.gda.epics.client.views.model.impl.NDProcModelImpl"> -->
<!-- 		<property name="basePVName" value="ELECTRON-ANALYSER-01:PROC:" /> -->
<!-- 	</bean> -->

<!-- 	<bean id="analyserNdROI" class="uk.ac.gda.epics.client.views.model.impl.NDROIModelImpl"> -->
<!-- 		<property name="basePVName" value="ELECTRON-ANALYSER-01:ROI:" /> -->
<!-- 	</bean> -->

<!-- 	<bean id="analyserNdArray" -->
<!-- 		class="uk.ac.gda.epics.client.views.model.impl.NDArrayModelImpl"> -->
<!-- 		<property name="basePVName" value="ELECTRON-ANALYSER-01:ARR:" /> -->
<!-- 	</bean> -->

<!-- 	<bean id="analyserNdStat" class="uk.ac.gda.epics.client.views.model.impl.NDStatModelImpl"> -->
<!-- 		<property name="basePVName" value="ELECTRON-ANALYSER-01:STAT:" /> -->
<!-- 	</bean> -->

<!-- 	<bean id="analyserStatusViewController" class="uk.ac.gda.epics.client.views.StatusViewController"> -->
<!-- 		<property name="adBaseModel" ref="analyserAdBaseModel" /> -->
<!-- 		<property name="fileSaverModel" ref="analyserFileSaverModel" /> -->
<!-- 		<property name="ffmjpegModel" ref="analyserFfmjpeg" /> -->
<!-- 	</bean> -->

<!-- 	<bean id="statusViewFactory" -->
<!-- 		class="uk.ac.gda.epics.client.views.factories.StatusViewFactory"> -->
<!-- 		<property name="viewPartName" value="Status" /> -->
<!-- 		<property name="statusViewController" ref="analyserStatusViewController" /> -->
<!-- 	</bean> -->
	
	<bean id="analyser" class="uk.ac.gda.remoting.client.GdaRmiProxyFactoryBean">
		<property name="serviceUrl" value="${gda.rmi.prefix}/analyser" />
		<property name="serviceInterface" value="org.opengda.detector.electronanalyser.server.IVGScientaAnalyser" />
		<property name="refreshStubOnConnectFailure" value="true" />
	</bean>
	
	<bean id="regionDefinitionResourceUtil" class="org.opengda.detector.electronanalyser.utils.RegionDefinitionResourceUtil">
<!-- 		<property name="fileName" value="D:/scratch/i09/data/Test123/My.seq" /> -->
		<property name="fileName" value="user.seq" />
		<property name="sourceSelectable" value="true"/>
		<property name="XRaySourceEnergyLimit" value="2100"/>
	</bean>
	<bean id="analysercamera" class="org.opengda.detector.electronanalyser.client.Camera">
		<property name="frameRate"	value="17" />
		<property name="energyResolution" value="0.0877"/>
		<property name="cameraXSize" value="1000"/>
		<property name="cameraYSize" value="900"/>
	</bean>
	<bean id="regionvalidator" class="org.opengda.detector.electronanalyser.lenstable.RegionValidator">
	<property name="name" value="regionvalidator"/>
		<property name="lookupTablePathMap">
			<map>
				<entry key="Low" value="${gda.config}/lookupTables/low_elementset_table.txt"/>
				<entry key="High" value="${gda.config}/lookupTables/high_elementset_table.txt"/>
			</map>
		</property>
		<property name="regionDefinitionResourceUtil" ref="regionDefinitionResourceUtil" />
		<property name="pgmEnergy" ref="pgmenergy" />
		<property name="dcmEnergy" ref="dcmenergy" />
	</bean>
	
	<bean id="sequenceviewfactory"
		class="org.opengda.detector.electronanalyser.client.viewfactories.SequenceViewFactory">
		<property name="viewPartName" value="Sequence Editor" />
		<property name="regionDefinitionResourceUtil" ref="regionDefinitionResourceUtil" />
		<property name="camera" ref="analysercamera"/>
		<property name="location" value="Diamond I09"/>
<!-- 		<property name="user" value="si8449-1"/> -->
<!-- 		<property name="user" value="${gda.defVisit}"/> -->
		<property name="analyser" ref="analyser"/>
		<property name="analyserStatePV" value="BL09I-EA-DET-01:CAM:DetectorState_RBV"/>
		<property name="analyserTotalTimeRemainingPV" value="BL09I-EA-DET-01:CAM:TOTAL_TIME_LEFT_RBV"/>
		<property name="hardShutterPV" value="BL09I-EA-FSHTR-01:CTRL"/>
		<property name="softShutterPV" value="BL09J-EA-FSHTR-01:CTRL"/>
		<property name="regionValidator" ref="regionvalidator"/>
	</bean>
	
	<corba:import namespace="i09" names="dcmenergy, pgmenergy" />

	<bean id="regionviewfactory"
		class="org.opengda.detector.electronanalyser.client.viewfactories.RegionViewFactory">
		<property name="viewPartName" value="Region Editor" />
		<property name="regionDefinitionResourceUtil" ref="regionDefinitionResourceUtil" />
		<property name="camera" ref="analysercamera"/>
		<property name="analyser" ref="analyser"/>
		<property name="currentIterationRemainingTimePV" value="BL09I-EA-DET-01:CAM:REGION_TIME_LEFT_RBV"/>
		<property name="iterationLeadPointsPV" value="BL09I-EA-DET-01:CAM:TOTAL_LEAD_POINTS_RBV" />
		<property name="iterationProgressPV" value="BL09I-EA-DET-01:CAM:REGION_PROGRESS_RBV"/>
		<property name="totalDataPointsPV" value="BL09I-EA-DET-01:CAM:TOTAL_DATA_POINTS_RBV" />
		<property name="iterationCurrentPointPV" value="BL09I-EA-DET-01:CAM:CURRENT_POINT_RBV" />
		<property name="totalRemianingTimePV" value="BL09I-EA-DET-01:CAM:TOTAL_TIME_LEFT_RBV"/>
		<property name="totalProgressPV" value="BL09I-EA-DET-01:CAM:PROGRESS_RBV"></property>
		<property name="totalPointsPV" value="BL09I-EA-DET-01:CAM:TOTAL_POINTS_RBV" />
		<property name="currentPointPV" value="BL09I-EA-DET-01:CAM:CURRENT_CHANNEL_RBV" />
		<property name="currentIterationPV" value="BL09I-EA-DET-01:CAM:NumExposuresCounter_RBV"/>
		<property name="totalIterationsPV" value="BL09I-EA-DET-01:CAM:NumExposures"/>
		<property name="statePV" value="BL09I-EA-DET-01:CAM:DetectorState_RBV" />
		<property name="acquirePV" value="BL09I-EA-DET-01:CAM:Acquire" />
		<property name="messagePV" value="BL09I-EA-DET-01:CAM:StatusMessage_RBV"/>
		<property name="zeroSuppliesPV" value="BL09I-EA-DET-01:CAM:ZERO_SUPPLIES"/>
		<property name="pgmEnergy" ref="pgmenergy" />
		<property name="dcmEnergy" ref="dcmenergy" />
	</bean>

	<bean id="spectrumviewfactory"
		class="org.opengda.detector.electronanalyser.client.viewfactories.SpectrumViewFactory">
		<property name="viewPartName" value="Spectrum" />
		<property name="analyser" ref="analyser" />
		<property name="updatePV" value="BL09I-EA-DET-01:CAM:CURRENT_CHANNEL_RBV"/>
		<property name="updatesPerSecond" value="8" />
	</bean>

	<bean id="imageviewfactory"
		class="org.opengda.detector.electronanalyser.client.viewfactories.ImageViewFactory">
		<property name="viewPartName" value="Image" />
		<property name="analyser" ref="analyser" />
		<property name="updatePV" value="BL09I-EA-DET-01:CAM:CURRENT_CHANNEL_RBV"/>
		<property name="updatesPerSecond" value="3" />
	</bean>

<!-- 	<bean id="externalioviewfactory" -->
<!-- 		class="org.opengda.detector.electronanalyser.client.viewfactories.ExternalIOViewFactory"> -->
<!-- 		<property name="viewPartName" value="External IO" /> -->
<!-- 		<property name="analyser" ref="analyser" /> -->
<!-- 		<property name="updatePV" value="BL09I-EA-DET-01:CAM:CURRENT_POINT_RBV"/> -->
<!-- 	</bean> -->
<!-- 	<bean id="slicesviewfactory" -->
<!-- 		class="org.opengda.detector.electronanalyser.client.viewfactories.SlicesViewFactory"> -->
<!-- 		<property name="viewPartName" value="Slices" /> -->
<!-- 		<property name="analyser" ref="analyser" /> -->
<!-- 		<property name="updatePV" value="BL09I-EA-DET-01:CAM:CURRENT_POINT_RBV"/> -->
<!-- 	</bean> -->
	<bean id="progressviewfactory"
		class="org.opengda.detector.electronanalyser.client.viewfactories.ProgressViewFactory">
		<property name="viewPartName" value="Progress" />
		
		<property name="currentIterationRemainingTimePV" value="BL09I-EA-DET-01:CAM:REGION_TIME_LEFT_RBV"/>
		<property name="iterationLeadPointsPV" value="BL09I-EA-DET-01:CAM:TOTAL_LEAD_POINTS_RBV" />
		<property name="iterationProgressPV" value="BL09I-EA-DET-01:CAM:REGION_PROGRESS_RBV"/>
		<property name="totalDataPointsPV" value="BL09I-EA-DET-01:CAM:TOTAL_DATA_POINTS_RBV" />
		<property name="iterationCurrentPointPV" value="BL09I-EA-DET-01:CAM:CURRENT_POINT_RBV" />
		
		<property name="totalRemianingTimePV" value="BL09I-EA-DET-01:CAM:TOTAL_TIME_LEFT_RBV"/>
		<property name="totalProgressPV" value="BL09I-EA-DET-01:CAM:PROGRESS_RBV"></property>
		<property name="totalPointsPV" value="BL09I-EA-DET-01:CAM:TOTAL_POINTS_RBV" />
		<property name="currentPointPV" value="BL09I-EA-DET-01:CAM:CURRENT_CHANNEL_RBV" />

		<property name="currentIterationPV" value="BL09I-EA-DET-01:CAM:NumExposuresCounter_RBV"/>
		<property name="totalIterationsPV" value="BL09I-EA-DET-01:CAM:NumExposures"/>
		
<!-- 		<property name="iterationTotalPointsPV" value="BL09I-EA-DET-01:CAM:TOTAL_POINTS_ITERATION_RBV" /> -->
<!-- 		<property name="currentDataPointPV" value="BL09I-EA-DET-01:CAM:CURRENT_DATA_POINT_RBV"/> -->
<!-- 		<property name="inLeadPV" value="BL09I-EA-DET-01:CAM:LEADING_IN_RBV"/> -->
<!-- 		<property name="currentLeadPointPV" value="BL09I-EA-DET-01:CAM:CURRENT_LEAD_POINT_RBV" /> -->
	</bean>
</beans>