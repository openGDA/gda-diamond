<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension
         point="org.eclipse.ui.perspectives">
      <perspective
            class="uk.ac.diamond.daq.beamline.lab44.perspectives.Peem"
            id="uk.ac.diamond.daq.beamline.lab44.perspectives.Peem"
            name="PEEM">
      </perspective>
   </extension>
   <extension
         point="org.eclipse.ui.views">
      <view
            class="gda.rcp.views.ViewFactoryFinder:pcssControlWidgetFactory"
            id="uk.ac.diamond.daq.beamline.lab44.pcss.live.stream.view.LiveStreamViewWithHistogram"
            name="PCSS"
            restorable="true">
      </view>
   </extension>
   <extension
         point="org.eclipse.ui.startup">
      <startup
            class="uk.ac.diamond.daq.beamline.lab44.EarlyStartup">
      </startup>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="toolbar:uk.ac.diamond.daq.beamline.lab44.sim.live.stream.view.LiveStreamViewWithHistogram">
         <command
               commandId="uk.ac.gda.client.live.stream.snapshotcommand"
               icon="platform:/plugin/uk.ac.gda.client.live.stream/icons/camera.png"
               label="Snapshot"
               style="push"
               tooltip="take a snapshot of image">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="activePartId">
                  <equals
                        value="uk.ac.diamond.daq.beamline.lab44.sim.live.stream.view.LiveStreamViewWithHistogram">
                  </equals>
               </with>
            </visibleWhen>
         </command>
         <command
               commandId="uk.ac.gda.client.live.stream.controls.startcommand"
               icon="platform:/plugin/uk.ac.gda.client.live.stream.controls/icons/control_play_blue.png"
               label="Start"
               style="push"
               tooltip="Start camera acquisition">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="lab44.sim.live.stream.active">
                  <equals
                        value="STOPPED">
                  </equals>
               </with>
            </visibleWhen>
         </command>
         <command
               commandId="uk.ac.gda.client.live.stream.controls.stopcommand"
               icon="platform:/plugin/uk.ac.gda.client.live.stream.controls/icons/control_stop_blue.png"
               label="Stop"
               style="push"
               tooltip="Stop camera acquisition">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="lab44.sim.live.stream.active">
                  <equals
                        value="RUNNING">
                  </equals>
               </with>
            </visibleWhen>
         </command>
         <command
               commandId="uk.ac.gda.client.live.stream.controls.freezecommand"
               icon="platform:/plugin/uk.ac.gda.client.live.stream.controls/icons/control_freeze_blue.png"
               label="Freeze"
               style="toggle"
               tooltip="Enable/disable image update">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="lab44.sim.live.stream.active">
                  <equals
                        value="RUNNING">
                  </equals>
               </with>
            </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="toolbar:uk.ac.diamond.daq.beamline.lab44.pcss.live.stream.view.LiveStreamViewWithHistogram">
         <command
               commandId="uk.ac.gda.client.live.stream.snapshotcommand"
               icon="platform:/plugin/uk.ac.gda.client.live.stream/icons/camera.png"
               label="Snapshot"
               style="push"
               tooltip="Take snapshot of the image">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="activePartId">
                  <equals
                        value="uk.ac.diamond.daq.beamline.lab44.pcss.live.stream.view.LiveStreamViewWithHistogram">
                  </equals>
               </with>
            </visibleWhen>
         </command>
         <command
               commandId="uk.ac.gda.client.live.stream.controls.startcommand"
               icon="platform:/plugin/uk.ac.gda.client.live.stream.controls/icons/control_play_blue.png"
               label="Start"
               style="push"
               tooltip="Start camera acquisition">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="lab44.pcss.live.stream.active">
                  <equals
                        value="STOPPED">
                  </equals>
               </with>
            </visibleWhen>
         </command>
         <command
               commandId="uk.ac.gda.client.live.stream.controls.stopcommand"
               icon="platform:/plugin/uk.ac.gda.client.live.stream.controls/icons/control_stop_blue.png"
               label="Stop"
               style="push"
               tooltip="Stop camera acquisition">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="lab44.pcss.live.stream.active">
                  <equals
                        value="RUNNING">
                  </equals>
               </with>
            </visibleWhen>
         </command>
         <command
               commandId="uk.ac.gda.client.live.stream.controls.freezecommand"
               icon="platform:/plugin/uk.ac.gda.client.live.stream.controls/icons/control_freeze_blue.png"
               label="Freeze"
               style="toggle"
               tooltip="Enable/Disable image update">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="lab44.pcss.live.stream.active">
                  <equals
                        value="RUNNING">
                  </equals>
               </with>
            </visibleWhen>
         </command>
      </menuContribution>
   </extension>
   <extension
            point="org.eclipse.ui.services">
         <sourceProvider
               provider="uk.ac.gda.client.live.stream.controls.camera.state.EpicsCameraState">
            <variable
                  name="lab44.sim.live.stream.active"
                  priorityLevel="workbench">
            </variable>
            <variable
                  name="lab44.pcss.live.stream.active"
                  priorityLevel="workbench">
            </variable>
         </sourceProvider>
   </extension>
   <extension
         id="product"
         point="org.eclipse.core.runtime.products">
      <product
            application="uk.ac.gda.client.application"
            name="uk.ac.diamond.daq.beamline.lab44.product">
         <property
               name="windowImages"
               value="platform:/plugin/uk.ac.gda.core/icons/GDAlogos/GDALogo16.png,platform:/plugin/uk.ac.gda.core/icons/GDAlogos/GDALogo32.png,platform:/plugin/uk.ac.gda.core/icons/GDAlogos/GDALogo48.png,platform:/plugin/uk.ac.gda.core/icons/GDAlogos/GDALogo64.png,platform:/plugin/uk.ac.gda.core/icons/GDAlogos/GDALogo128.png">
         </property>
         <property
               name="aboutText"
               value="GDA for DLS Beamone Lab44">
         </property>
         <property
               name="startupForegroundColor"
               value="000000">
         </property>
         <property
               name="startupProgressRect"
               value="2,215,598,15">
         </property>
         <property
               name="startupMessageRect"
               value="4,195,598,20">
         </property>
         <property
               name="appName"
               value="uk.ac.diamond.daq.beamline.lab44.product">
         </property>
         <property
               name="preferenceCustomization"
               value="plugin_customization.ini">
         </property>
      </product>
   </extension>
   <extension
         id="dummy_product"
         point="org.eclipse.core.runtime.products">
      <product
            application="uk.ac.gda.client.application"
            name="uk.ac.diamond.daq.beamline.lab44.dummy.product">
         <property
               name="appName"
               value="uk.ac.diamond.daq.beamline.lab44.dummy.product">
         </property>
      </product>
   </extension>

</plugin>
