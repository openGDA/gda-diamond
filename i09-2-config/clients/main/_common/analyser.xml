<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

	<bean id="analyser" class="uk.ac.gda.remoting.client.GdaRmiProxyFactoryBean">
		<description>Import the analyser using RMI</description>
		<property name="serviceUrl" value="${gda.rmi.prefix}analyser" />
		<property name="serviceInterface" value="org.opengda.detector.electronanalyser.server.IVGScientaAnalyser" />
		<property name="refreshStubOnConnectFailure" value="true" />
	</bean>

	<bean id="imageviewfactory" class="org.opengda.detector.electronanalyser.client.viewfactories.ImageViewFactory">
		<property name="viewPartName" value="Image" />
		<property name="analyser" ref="analyser" />
		<property name="arrayPV" value="TEST-SPECS-01:IMAGE"/>
	</bean>

	<bean id="spectrumviewfactory" class="org.opengda.detector.electronanalyser.client.viewfactories.SpectrumViewFactory">
		<property name="viewPartName" value="Spectrum" />
		<property name="analyser" ref="analyser" />
		<property name="arrayPV" value="TEST-SPECS-01:INT_SPECTRUM"/>
	</bean>
	
	<bean id="progressviewfactory"
		class="org.opengda.detector.electronanalyser.client.viewfactories.ProgressViewFactory">
		<property name="viewPartName" value="Progress" />
		
		<property name="currentIterationRemainingTimePV" value="TEST-SPECS-01:REGION_TIME_LEFT_RBV"/>
		<property name="iterationLeadPointsPV" value="TEST-SPECS-01:CURRENT_POINT_RBV" />
		<property name="iterationProgressPV" value="TEST-SPECS-01:REGION_PROGRESS_RBV"/>
		<property name="totalDataPointsPV" value="TEST-SPECS-01:TOTAL_POINTS_ITERATION_RBV" />
		<property name="iterationCurrentPointPV" value="TEST-SPECS-01:CURRENT_POINT_RBV" />
		
		<property name="totalRemianingTimePV" value="TEST-SPECS-01:TOTAL_TIME_LEFT_RBV"/>
		<property name="totalProgressPV" value="TEST-SPECS-01:PROGRESS_RBV"></property>
		<property name="totalPointsPV" value="TEST-SPECS-01:TOTAL_POINTS_RBV" />
		<property name="currentPointPV" value="TEST-SPECS-01:CURRENT_CHANNEL_RBV" />

		<property name="currentIterationPV" value="TEST-SPECS-01:NumExposures_RBV"/>
		<property name="totalIterationsPV" value="TEST-SPECS-01:NumExposures"/>
	</bean>

	<bean id="sequenceviewfactory"
		class="org.opengda.detector.electronanalyser.client.viewfactories.SequenceViewFactory">
		<property name="viewPartName" value="Sequence Editor" />
		<property name="regionDefinitionResourceUtil" ref="regionDefinitionResourceUtil" />
		<property name="camera" ref="analysercamera"/>
		<property name="location" value="Diamond I09"/>
<!-- 		<property name="user" value="si8449-1"/> -->
<!-- 		<property name="user" value="${gda.defVisit}"/> -->
		<property name="analyser" ref="analyser"/>
		<property name="analyserStatePV" value="ELECTRON-ANALYSER-01:TEST:DetectorState_RBV"/>
		<property name="analyserTotalTimeRemainingPV" value="ELECTRON-ANALYSER-01:TEST:TOTAL_TIME_LEFT_RBV"/>
<!-- 		<property name="hardShutterPV" value="BL09I-EA-FSHTR-01:CTRL"/> -->
<!-- 		<property name="softShutterPV" value="BL09J-EA-FSHTR-01:CTRL"/> -->
<!-- 		<property name="regionValidator" ref="regionvalidator"/> -->
	</bean>
	
	<bean id="regionDefinitionResourceUtil" class="org.opengda.detector.electronanalyser.utils.RegionDefinitionResourceUtil">
		<property name="fileName" value="user.seq" />
		<property name="sourceSelectable" value="false"/>
		<property name="XRaySourceEnergyLimit" value="2100"/>
	</bean>
	
	<bean id="analysercamera" class="org.opengda.detector.electronanalyser.client.Camera">
		<property name="frameRate"	value="17" />
		<property name="energyResolution" value="0.0877"/>
		<property name="cameraXSize" value="1000"/>
		<property name="cameraYSize" value="900"/>
	</bean>

</beans>
